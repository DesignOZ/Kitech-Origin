<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge"> 
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=zlti2pxrmq"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/nav.css">
    <link rel="stylesheet" type="text/css" href="css/3dp.css">
    <link rel="stylesheet" type="text/css" href="css/chart.css">
</head>
<body>
    <nav class="topnav navbar bg-dark">
        <div class="nav_btn justify-content-between">
            <ion-icon name="menu-outline" class="nav_toggle" id="nav_toggle"></ion-icon>
        </div>
        <a class="topnav_title me-auto" href="3dp_main.html"><div class="font">3dp</div></a>
        <div class="dp-flex align-items-center mx-3 me-lg-0">
            <ul class="topnav_content align-items-center ms-auto">
                <li class="mr-01 dp-block" id="test"><span>NULL</span></li>
                <li class="mr-01 dsp-block"><span>NULL</span></li>
                <li class="mr-01 dp-block"><span>NULL</span></li>
            </ul>
        </div>
    </nav>
    <div id="main_draw">
        <div id="sidenav">
            <nav class="sidenavbar justify-content-between bg-dark" id="side_navbar">
                <div class="nav__list">
                    <a onclick="javascript:show_page(1);" class="nav__link active" href="index.html">
                        <ion-icon name="settings-outline" class="nav__icon"></ion-icon>
                        <span class="nav_name">main</span>
                    </a>
                    <a onclick="javascript:show_page(2);" class="nav__link" href="3dp_search.html">
                        <ion-icon name="search-outline" class="nav__icon"></ion-icon>
                        <span class="nav_name">search</span>
                    </a>
                    <a onclick="javascript:show_page(3);" class="nav__link" href="3dp_map.html">
                        <ion-icon name="map-outline" class="nav__icon"></ion-icon>
                        <span class="nav_name">map</span>
                    </a>
                </div>
                <div>
                    <a href="#" class="nav__link">
                    <ion-icon name="log-out-outline" class="nav__icon"></ion-icon>
                    <span class="nav_name">(NULL)</span>
                    </a>
                </div>
            </nav>
        </div>
        <div id="main_content" style="margin-left:120px;">
            <main class="main_container">
                <div id="wrap" class="section">
                    <h2>기업정보</h2>
                    <div id="map" style="width:95%;height:700px;"></div>
                    <code id="snippet" class="snippet"></code>
                </div>
            </main>
        </div>
    </div>
</body>

<script id="code">
    
    var latitude;
    var longitude;
    var name = "생산기술연구원";
    var address = "대구 달성군 유가읍 테크노순환로 320";
    
    $.ajax({
        url: 'csv/markerdata.csv',
        dataType: 'text',
    }).done(successFunction);
    
    function successFunction(data) {
        var allRows = data.split(/\r?\n|\r/);
        var table = '<table>';
    
        console.log(allRows.length);
    
        for (var singleRow = 0; singleRow < allRows.length-1; singleRow++) {
            
            if (singleRow === 0) {
                console.log('for1-'+singleRow);
            } else {
                var rowCells = allRows[singleRow].split(',');
                console.log(rowCells);
        
                for (var i = 0; i < rowCells.length; i++) {
                    if (i == 0) {
                        latitude = rowCells[i];
                    } else if(i ==1){
                        longitude = rowCells[i];
                    } else if(i ==2){
                        name = rowCells[i];
                    } else{
                        address = rowCells[i];
                    }
                }
            } 
        }
    
        console.log(latitude);
        console.log(longitude);
    
        var cityhall = new naver.maps.LatLng(latitude, longitude),
        map = new naver.maps.Map('map', {
            center: cityhall.destinationPoint(0, 500),
            zoom: 15
        }),
        marker = new naver.maps.Marker({
            map: map,
            position: cityhall
        });
    
        var contentString = [
                '<div class="iw_inner">',
                '   <h3>'+name+'</h3>',
                '   <p>'+address+'<br />',
                '       053-000-0000 | 공공, 연구기관 &gt;<br />',
                '       인원 : n명<br/>',
                '       <a href="http://www.kitech.re.kr" target="_blank">www.kitech.re.kr</a>',
                '   </p>',
                '</div>'
        ].join('');
    
        var infowindow = new naver.maps.InfoWindow({
            content: contentString
        });
    
        naver.maps.Event.addListener(marker, "click", function(e) {
            if (infowindow.getMap()) {
                infowindow.close();
            } else {
                infowindow.open(map, marker);
            }
        });
    
        //infowindow.open(map, marker);
    }
    
    //var HOME_PATH = window.HOME_PATH || '.';
    //'       <img src="'+ HOME_PATH +'/img/example/hi-seoul.jpg" width="55" height="55" alt="서울시청" class="thumb" /><br />',
    
    
</script>
<script type="text/javascript" src="js/nav.js"></script>
BlueArchive
</html>